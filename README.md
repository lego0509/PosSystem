# 学園祭カフェ POS システム

学園祭カフェのレジ〜キッチン〜受け渡し向けに作成した簡易 POS システムです。Node.js ベースのミニサーバーで商品／注文／受付状態を管理し、同一ネットワーク内の複数端末（iPad・PC など）から同じデータを共有できます。

## 収録画面

- `/pos` : レジ担当者が注文を入力する 3 カラムレイアウト。
- `/kds` : キッチン側が調理進行を管理する 1 画面ボード。
- `/call` : 完成済みの番号を大書表示する呼び出し画面。
- `/catalog` : 商品データを追加・編集する管理画面。

トップページ（`/`）には各画面への導線を配置しています。

## 主な機能

### 共通
- 4 桁の注文番号を自動採番（0001〜9999）。
- data-testid 属性を主要コンポーネントに付与。
- レスポンシブ対応（タブレット横置き〜フル HD）。
- Web App Manifest ＆ Service Worker を同梱し、iPad などでホーム画面追加（PWA）に対応。
- PWA 用アイコンは SVG プレースホルダー（`icons/icon-192.svg` `icons/icon-512.svg`）を収録。実運用では `icons/` に独自の PNG アイコンを配置しても構いません（`.gitignore` 済み）。
- サーバー常駐の JSON ストア（`data/store.json`）で商品・注文・受付状態を一元管理。

### 注文入力 `/pos`
- F1〜F5 でカテゴリ切り替え、1〜9 で次回数量指定、Ctrl+Z で直前取消、Enter で注文確定。
- 商品カードは 3 列×2 行のページング表示（6 商品／ページ）で、iPad 横画面でもスクロール不要。
- 無料オプションはモーダルで選択。カートは 3 行固定のページング表示で数量調整・行メモ入力が可能。
- 受付一時停止トグルと赤帯表示を実装。
- 注文確定後に 4 桁番号を大きく表示し案内。

### キッチンボード `/kds`
- 1 画面に全注文をまとめたシングルボード。状態順（待ち→調理中→完成）で自動整列。
- 表示密度は「ゆったり／標準／一覧」から選べ、1 画面に映すカード数を可変にできます。
- 無料オプションを色付きバッジで表現。経過タイマーを mm:ss で自動更新。
- 検索（番号・名前）とカテゴリフィルタ、Undo ボタン、状態変更時の効果音を搭載。

### 呼び出し `/call`
- 完成状態の番号を超特大グリッドで表示し、新規完成時に数秒ハイライト＆効果音。
- 番号のタップ／Enter／Space で再掲対象に選択。再掲ボタンで再度ハイライト。
- 受け渡し完了ボタンで番号を履歴へ移動。最近 10 件を下部に表示。
- 全画面表示ボタン（トグル）を備えています。

### 商品管理 `/catalog`
- 既存商品の名称・価格・画像・カテゴリ・オプションセットを即時編集可能。
- 画像はPCからアップロードするか、外部URLを指定するかを選べ、アップロードした画像は自動でプレビューに反映されます。
- 新規追加・複製・削除に対応し、保存すると全画面にリアルタイム反映されます。
- カテゴリフィルタと検索で商品を素早く絞り込み、プレビューで画像と価格を確認できます。
- 初期データへのリセットボタンを用意し、変更を簡単に巻き戻せます。

## 開発・動作方法

1. Node.js 18 以降で以下を実行して依存関係を導入します。

   ```bash
   npm install
   ```

2. サーバーを起動します。

   ```bash
   npm run dev
   ```

3. 起動したマシンのローカル IP アドレス（例: `http://192.168.0.10:4173`）を利用して、同じネットワーク上の端末から `/pos` `/kds` `/call` `/catalog` にアクセスしてください。

サーバーは `data/store.json` に状態を保存します。初期化したい場合はサーバー停止後にこのファイルを削除するか、`/catalog` の「初期データに戻す」ボタンと `/call` 画面右上の操作（受け渡し完了）を組み合わせて整理してください。
